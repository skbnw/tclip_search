# Streamlitアプリ公開サービス比較ガイド

利用者数1000人以内のStreamlitアプリ公開に適したサービスを比較します。

## 🎯 おすすめサービス（優先順）

### 1. **Streamlit Community Cloud** ⭐⭐⭐⭐⭐
**最優先推奨（無料・簡単）**

- **料金**: 無料
- **特徴**: 
  - Streamlit公式のホスティングサービス
  - GitHub連携で自動デプロイ
  - セットアップが最も簡単
  - カスタムドメイン対応（有料）
- **制限**: 
  - 公開リポジトリが必要（またはPrivate repoは有料プラン）
  - 同時接続数に制限あり
- **適性**: 小規模・中規模利用に最適
- **デプロイ時間**: 5分程度

**推奨度**: ★★★★★（最も簡単で無料）

---

### 2. **AWS App Runner** ⭐⭐⭐⭐
**AWS利用者向け（スケーラブル・セキュア）**

- **料金**: 約$0.007/GBメモリ時間 + $0.40/vCPU時間（月額約$25-50程度）
- **特徴**:
  - S3との統合が容易（同じAWS環境）
  - 自動スケーリング
  - HTTPS対応
  - 環境変数でAWS認証情報を安全に管理
- **適性**: 既にAWS利用中の場合
- **デプロイ時間**: 30分程度

**推奨度**: ★★★★☆（AWS環境なら最適）

---

### 3. **Railway** ⭐⭐⭐⭐
**バランス良好（シンプル・低コスト）**

- **料金**: $5/月（Starterプラン）～ 使用量ベース
- **特徴**:
  - デプロイが簡単（GitHub連携）
  - 無料クレジットあり
  - 環境変数管理が簡単
  - 自動スケーリング
- **適性**: 中規模利用、コスト重視
- **デプロイ時間**: 10分程度

**推奨度**: ★★★★☆（バランス重視）

---

### 4. **Render** ⭐⭐⭐⭐
**開発者向け（無料プランあり）**

- **料金**: 無料プランあり、または$7/月（Starter）
- **特徴**:
  - 無料プランで試せる
  - GitHub連携
  - 自動デプロイ
  - 環境変数管理
- **制限**: 無料プランは15分後にスリープ
- **適性**: 小規模利用、試用段階
- **デプロイ時間**: 10分程度

**推奨度**: ★★★★☆（試用・小規模向け）

---

### 5. **Fly.io** ⭐⭐⭐
**グローバル展開向け**

- **料金**: 無料枠あり、その後は使用量ベース
- **特徴**:
  - グローバルCDN
  - 低レイテンシ
  - Docker対応
- **適性**: グローバル利用者向け
- **デプロイ時間**: 20分程度

**推奨度**: ★★★☆☆（グローバル展開時）

---

### 6. **AWS EC2 / ECS** ⭐⭐⭐
**完全コントロール**

- **料金**: EC2は約$10-30/月（t3.small）、ECSはFargate使用で$20-50/月
- **特徴**:
  - 完全な制御が可能
  - カスタマイズ性が高い
  - S3アクセスが最適化可能
- **適性**: 大規模利用、カスタマイズが必要
- **デプロイ時間**: 1-2時間

**推奨度**: ★★★☆☆（高度な要件がある場合）

---

## 📊 比較表

| サービス | 料金/月 | セットアップ | AWS統合 | スケーラビリティ | おすすめ度 |
|---------|---------|------------|---------|-----------------|-----------|
| **Streamlit Community Cloud** | **無料** | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐⭐⭐ |
| **AWS App Runner** | $25-50 | ⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐ |
| **Railway** | $5-20 | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐⭐ |
| **Render** | 無料-$7 | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐⭐ |
| **Fly.io** | 無料-$10 | ⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐ |
| **AWS EC2/ECS** | $10-50 | ⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ |

---

## 🚀 推奨アプローチ

### **段階的デプロイ戦略**

#### ステップ1: Streamlit Community Cloudで開始（無料）
```bash
# GitHubにプッシュ後、Streamlit Cloudで接続
# 5分でデプロイ完了
```

**メリット**:
- 無料で開始可能
- 最も簡単なセットアップ
- 試用・検証に最適

#### ステップ2: 利用者が増えたらAWS App Runnerへ移行
**移行のタイミング**:
- 同時接続数が100人を超える
- カスタムドメインが必要
- より高度な設定が必要

---

## 📝 デプロイ前の準備

### 必要な設定ファイル

#### 1. `requirements.txt`（既存）
```
streamlit>=1.28.0
boto3>=1.28.0
```

#### 2. `.streamlit/config.toml`（作成推奨）
```toml
[server]
port = 8501
enableCORS = false
enableXsrfProtection = true

[browser]
gatherUsageStats = false
```

#### 3. 環境変数の設定
各サービスで以下を設定：
```
AWS_ACCESS_KEY_ID=your_key
AWS_SECRET_ACCESS_KEY=your_secret
AWS_DEFAULT_REGION=ap-northeast-1
```

---

## ⚠️ 注意事項

### セキュリティ
- **AWS認証情報は絶対にコードに含めない**
- 環境変数で管理（各サービスで設定可能）
- IAMロールで最小権限を設定（AWS利用時）

### パフォーマンス
- Streamlitのキャッシュ機能を活用（`@st.cache_data`）
- S3アクセスはプリサインドURLを使用
- 大量データの検索は最適化が必要

### コスト管理
- 1000人規模でも、同時接続は10-50人程度を想定
- データ転送量に注意（S3からの読み込み）
- CloudWatchでモニタリング推奨（AWS利用時）

---

## 🎯 結論

**利用者数1000人以内の場合：**

1. **まず試す**: **Streamlit Community Cloud（無料）**
   - 最も簡単でコスト効率が良い
   - 問題なければそのまま運用可能

2. **AWS環境なら**: **AWS App Runner**
   - S3統合が最適
   - セキュリティが高い
   - スケーラブル

3. **コスト重視**: **Railway** または **Render**
   - 低コストで運用可能
   - デプロイが簡単

**推奨**: Streamlit Community Cloudから開始し、必要に応じてAWS App Runnerへ移行

